<html>
<head>
    <title></title>
    <script src="Game.js"></script>
    <script src="GameUI.js"></script>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="jquery-ui.min.js"></script>
    <link href="jquery-ui.min.css" rel="stylesheet">
    <link href="jquery-ui.theme.min.css" rel="stylesheet">
    <script>

        var log = function (s) {
            if (document.readyState !== "complete") {
                log.buffer.push(s);
            } else {
                document.getElementById("output").innerHTML += (s + "\n");
            }
        }

        log.buffer = [];

        var socket = null;
        function init() {
            window.WebSocket = window.WebSocket || window.MozWebSocket;
            if (!window.WebSocket) {
                log("WebSocket not supported by this browser");
                return;
            }
            var webSocket = new WebSocket("ws://localhost:13001/");
            webSocket.onopen = onopen;
            webSocket.onclose = onclose;
            webSocket.onmessage = onmessage;

            socket = webSocket;
        }

        function onopen() {
            log("Open a web socket.");
        }

        function onclose() {
            log("Close a web socket.");
        }


        var MinionPosDialog;
        var TargetPosDialog;
        $(function () {

            MinionPosDialog = $("#formMinionPos").dialog({
                autoOpen: false,
                modal: true,
                width: 1100,
                height: 300
            });

            TargetPosDialog = $("#formTargetPos").dialog({
                autoOpen: false,
                modal: true,
                width: 1100,
                height: 400
            });

        });
    </script>
</head>
<body onload="init()">
    <form>
        <svg id="gamePanel" width="1600" height="750" version="1.1" xmlns="http://www.w3.org/2000/svg">
            <rect width="1600" height="750" stroke="lightgreen" fill="transparent" stroke-width="2" />
            <text id="GameId" x="30" y="30" text-anchor="start"></text>
            <!--注意如果文字在上面，则文字图层会覆盖按钮图层，造成OnClick事件无法响应-->
            <text x="200" y="40" text-anchor="start" font-size="10">开始游戏</text>
            <rect id="btnCreateGame" x="200" y="30" width="50" height="20" stroke="lightgreen" fill="transparent" stroke-width="2" onclick="CreateGame()" />
            <text x="300" y="40" text-anchor="start" font-size="10">结束回合</text>
            <rect id="btnEndTurn" x="300" y="30" width="50" height="20" stroke="lightgreen" fill="transparent" stroke-width="2" onclick="EndTrun()" />
        </svg>
        <svg display="none" id="BasicCard" x="0" y="0" width="150" height="150" version="1.1" xmlns="http://www.w3.org/2000/svg">
            <rect width="150" height="150" stroke="lightgreen" fill="transparent" stroke-width="2" />
            <!--左上角的使用成本 -->
            <rect width="30" height="30" stroke="lightgreen" fill="lightblue" stroke-width="2" />
            <text id="txtCost" x="15" y="15" font-size="15" text-anchor="middle" fill="white">7</text>
            <!--卡牌名称 -->
            <text id="txtName" x="40" y="15" font-size="15" text-anchor="start" fill="black">知识古树</text>
            <!--卡牌描述 -->
            <text x="20" y="55" font-size="12" text-anchor="start" fill="black">抉择:</text>
            <text x="20" y="75" font-size="12" text-anchor="start" fill="black">抽两张牌</text>
            <text x="20" y="95" font-size="12" text-anchor="start" fill="black">恢复8点生命值</text>
            <!--左下角的攻击力 -->
            <rect x="0" y="120" width="30" height="30" stroke="lightgreen" fill="purple" stroke-width="2" />
            <text id="txtAttackPoint" x="15" y="135" font-size="15" text-anchor="middle" fill="white">5</text>
            <!--右下角的生命值 -->
            <rect x="120" y="120" width="30" height="30" stroke="lightgreen" fill="red" stroke-width="2" />
            <text id="txtLifePoint" x="135" y="135" font-size="15" text-anchor="middle" fill="white">5</text>
        </svg>
        <svg display="block" id="BasicButton" x="0" y="0" width="80" height="20" version="1.1" xmlns="http://www.w3.org/2000/svg">
            <text id="txtButton" x="0" y="15" text-anchor="start" font-size="10" fill="red">位置</text>
            <rect x="0" y="0" width="80" height="20" stroke="lightgreen" fill="transparent" stroke-width="2" />
        </svg>
        <div id="formMinionPos" title="选择随从位置">
            <svg id="MinionsPanel" width="1000" height="250">
            </svg>
        </div>
        <div id="formTargetPos" title="选择目标位置">
            <svg id="TargetPanel" width="1000" height="350">
            </svg>
        </div>
    </form>
</body>
</html>
